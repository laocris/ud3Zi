<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vocabulario básico UD3 de Chino II</title>
  <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    <style>
  @import url('https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@400;700&display=swap');
    
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Noto Serif SC', serif;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      margin: 0;
      background: linear-gradient(135deg, #f5f5dc 0%, #fff8dc 50%, #faf0e6 100%);
      text-align: center;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }
    
    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: 
        repeating-linear-gradient(
          90deg,
          transparent,
          transparent 100px,
          rgba(139, 69, 19, 0.03) 100px,
          rgba(139, 69, 19, 0.03) 101px
        ),
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 100px,
          rgba(139, 69, 19, 0.03) 100px,
          rgba(139, 69, 19, 0.03) 101px
        );
      pointer-events: none;
      z-index: 1;
    }
    
    body::after {
      content: "";
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 120px;
      height: 120px;
      background-image: url('./laolao.png');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      opacity: 0.6;
      filter: contrast(1.2) sepia(0.3);
      border-radius: 10%;
      box-shadow: 0 0 20px rgba(139, 0, 0, 0.2);
      z-index: 10;
    }
    
    .container {
      display: flex;
      width: 100%;
      max-width: 1200px;
      position: relative;
      z-index: 2;
    }
    
    h1.main-title {
      font-family: 'Ma Shan Zheng', cursive;
      font-size: 2.5rem;
      color: #8b0000;
      margin-bottom: 30px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
      position: relative;
      padding: 10px 30px;
    }
    
    h1.main-title::before,
    h1.main-title::after {
      content: "〜";
      position: absolute;
      color: #cd5c5c;
      font-size: 1.5rem;
    }
    
    h1.main-title::before {
      left: 0;
    }
    
    h1.main-title::after {
      right: 0;
    }
    
    .sidebar {
      width: 200px;
      margin-right: 20px;
      background: linear-gradient(to bottom, #fff, #faf8f3);
      border: 2px solid #8b4513;
      border-radius: 10px;
      padding: 15px;
      overflow-y: auto;
      max-height: 80vh;
      box-shadow: 0 4px 15px rgba(139, 69, 19, 0.2);
      position: relative;
    }
    
    .sidebar::before {
      position: absolute;
      top: -15px;
      right: 10px;
      font-family: 'Ma Shan Zheng', cursive;
      font-size: 30px;
      color: rgba(139, 0, 0, 0.2);
      transform: rotate(15deg);
    }
    
    .sidebar h3 {
      margin-top: 0;
      font-size: 18px;
      color: #8b0000;
      font-family: 'Ma Shan Zheng', cursive;
      border-bottom: 2px solid #cd5c5c;
      padding-bottom: 8px;
    }
    
    .sidebar ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .sidebar li {
      margin: 8px 0;
    }
    
    .sidebar button {
      width: 100%;
      padding: 10px;
      background: linear-gradient(to right, #faf8f3, #fff);
      border: 1px solid #8b4513;
      cursor: pointer;
      text-align: left;
      border-radius: 5px;
      font-size: 14px;
      font-family: 'Noto Sans SC', serif;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .sidebar button:hover {
      background: linear-gradient(to right, #fff8dc, #ffefd5);
      border-color: #8b0000;
      transform: translateX(3px);
    }
    
    .sidebar button.active {
      background: linear-gradient(to right, #8b0000, #cd5c5c);
      color: white;
      border-color: #8b0000;
      box-shadow: 0 2px 8px rgba(139, 0, 0, 0.3);
    }
    
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .character-display-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 20px;
      position: relative;
    }
    
    #character-target-div {
      border: 3px solid #8b4513;
      background: linear-gradient(135deg, #fffaf0 0%, #fff 100%);
      margin: 20px 0 10px 0;
      width: 150px;
      height: 150px;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(139, 69, 19, 0.2);
      position: relative;
    }
    
    #character-target-div::after {
      content: "";
      position: absolute;
      top: -8px;
      right: -8px;
      width: 20px;
      height: 20px;
      background: radial-gradient(circle, #cd5c5c, #8b0000);
      border-radius: 50%;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    
    .replay-button {
      padding: 10px 20px;
      background: linear-gradient(135deg, #cd853f, #daa520);
      color: white;
      border: 1px solid #8b4513;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      font-family: 'Noto Serif SC', serif;
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 0 auto;
      transition: all 0.3s ease;
      box-shadow: 0 3px 10px rgba(139, 69, 19, 0.3);
    }
    
    .replay-button:hover {
      background: linear-gradient(135deg, #b8860b, #cd853f);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(139, 69, 19, 0.4);
    }
    
    .replay-button:active {
      transform: translateY(0);
    }
    
    .canvas-container {
      position: relative;
      margin: 20px 0;
      padding: 15px;
      background: white;
      border-radius: 10px;
      box-shadow: inset 0 0 10px rgba(139, 69, 19, 0.1);
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
    }
    
    #character-canvas {
      border: 2px solid #8b4513;
      border-radius: 8px;
      cursor: crosshair;
      background: linear-gradient(to bottom right, #fffaf0, #fff);
      touch-action: none;
      box-shadow: 0 2px 10px rgba(139, 69, 19, 0.2);
      max-width: 100%;
      height: auto;
    }
    
    .canvas-controls {
      margin-top: 15px;
      display: flex;
      gap: 10px;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      width: 100%;
      padding: 0 10px;
    }
    
    .canvas-controls button {
      padding: 10px 18px;
      font-size: 14px;
      background: linear-gradient(135deg, #4682b4, #5f9ea0);
      color: white;
      border: 1px solid #2f4f4f;
      cursor: pointer;
      border-radius: 20px;
      font-family: 'Noto Serif SC', serif;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(70, 130, 180, 0.3);
      white-space: nowrap;
      flex-shrink: 0;
    }
    
    .canvas-controls button:hover {
      background: linear-gradient(135deg, #5f9ea0, #4682b4);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(70, 130, 180, 0.4);
    }
    
    .clear-button {
      background: linear-gradient(135deg, #dc143c, #b22222) !important;
      border: 1px solid #8b0000 !important;
    }
    
    .clear-button:hover {
      background: linear-gradient(135deg, #b22222, #dc143c) !important;
    }
    
    .stroke-control {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 15px;
      background: #faf8f3;
      border-radius: 20px;
      border: 1px solid #8b4513;
      flex-shrink: 0;
    }
    
    .stroke-control input {
      width: 100px;
    }
    
    .nav-buttons {
      margin-top: 20px;
      display: flex;
      gap: 15px;
      justify-content: center;
    }
    
    .nav-buttons button {
      padding: 12px 25px;
      font-size: 16px;
      background: linear-gradient(135deg, #8b0000, #cd5c5c);
      color: white;
      border: 1px solid #8b0000;
      cursor: pointer;
      border-radius: 25px;
      font-family: 'Noto Serif SC', serif;
      transition: all 0.3s ease;
      box-shadow: 0 3px 10px rgba(139, 0, 0, 0.3);
    }
    
    .nav-buttons button:hover {
      background: linear-gradient(135deg, #cd5c5c, #8b0000);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(139, 0, 0, 0.4);
    }
    
    #current-word {
      font-size: 24px;
      margin-bottom: 15px;
      padding: 15px 30px;
      background: linear-gradient(to right, #faf8f3, #fff);
      border: 2px solid #8b4513;
      border-radius: 30px;
      color: #000;
      box-shadow: 0 3px 10px rgba(139, 69, 19, 0.2);
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      min-width: 300px;
    }
    
    #current-word::before,
    #current-word::after {
      content: "•";
      position: absolute;
      color: #cd5c5c;
      font-size: 20px;
    }
    
    #current-word::before {
      left: 10px;
    }
    
    #current-word::after {
      right: 10px;
    }

    .hanzi {
      font-family: 'Ma Shan Zheng', cursive;
      font-size: 36px;
      color: #8b0000;
      font-weight: normal;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }

    .info {
      font-family: 'Noto Serif SC', serif;
      font-size: 18px;
      font-weight: 400;
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      line-height: 1.4;
    }

    .info .pinyin {
      color: #4682b4;
      font-family: sans-serif;
      font-weight: 700;
      margin-bottom: 2px;
    }

    .info .spanish {
      color: #555;
      font-size: 16px;
    }
    
    .practice-section {
      background: linear-gradient(135deg, #fff, #faf8f3);
      padding: 25px;
      border-radius: 15px;
      margin-top: 20px;
      box-shadow: 0 4px 15px rgba(139, 69, 19, 0.2);
      width: 100%;
      max-width: 400px;
      border: 2px solid #8b4513;
      position: relative;
    }
    
    .practice-section::before {
      position: absolute;
      top: -12px;
      left: 20px;
      background: linear-gradient(135deg, #fff, #faf8f3);
      padding: 0 10px;
      font-family: 'Ma Shan Zheng', cursive;
      font-size: 20px;
      color: #8b0000;
    }
    
    .practice-section h3 {
      margin-top: 0;
      color: #8b0000;
      font-family: 'Ma Shan Zheng', cursive;
      font-size: 22px;
    }
    
    .mobile-menu-toggle {
      display: none;
      width: 100%;
      padding: 12px;
      background: linear-gradient(135deg, #8b0000, #cd5c5c);
      color: white;
      border: 1px solid #8b0000;
      border-radius: 25px;
      font-size: 16px;
      margin-bottom: 10px;
      cursor: pointer;
      font-family: 'Noto Serif SC', serif;
      box-shadow: 0 3px 10px rgba(139, 0, 0, 0.3);
    }

    .audio-button {
      background: linear-gradient(135deg, #87ceeb, #4682b4);
      border-radius: 50%;
      width: 35px;
      height: 35px;
      border: 2px solid #4682b4;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(70, 130, 180, 0.3);
      position: absolute;
      top: 20px;
      right: -50px;
    }

    .audio-button:hover {
      background: linear-gradient(135deg, #4682b4, #87ceeb);
      transform: scale(1.1) rotate(10deg);
      box-shadow: 0 6px 15px rgba(70, 130, 180, 0.4);
    }

    .audio-button:active {
      transform: scale(0.95);
    }

    .attribution {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      text-align: center;
      padding: 20px 10px;
      margin-top: 40px;
      font-size: 14px;
      color: #8b4513;
      background: linear-gradient(to right, transparent, #faf8f3, transparent);
      border-radius: 20px;
      font-family: 'Noto Serif SC', serif;
    }

    .attribution a {
      color: #8b0000;
      text-decoration: none;
      font-weight: bold;
      transition: color 0.3s ease;
    }

    .attribution a:hover {
      color: #cd5c5c;
      text-decoration: underline;
    }
    
    @media (max-width: 768px) {
      body {
        padding: 15px;
      }
      
      body::after {
        width: 80px;
        height: 80px;
        bottom: 20px;
        right: 20px;
      }
      
      .container {
        flex-direction: column;
      }
      
      .sidebar {
        width: 100%;
        margin-right: 0;
        margin-bottom: 20px;
        max-height: 300px;
      }
      
      .practice-section {
        padding: 15px;
        max-width: 100%;
        width: calc(100% - 20px);
      }

      .canvas-container {
        padding: 10px;
      }
      
      #character-canvas {
        width: 220px !important;
        height: 220px !important;
      }
      
      .audio-button {
        position: static;
        margin-bottom: 10px;
      }

      #current-word {
        flex-direction: column;
        gap: 8px;
        min-width: auto;
        padding: 12px 25px;
      }

      .hanzi {
        font-size: 32px;
      }

      .info {
        align-items: center;
        text-align: center;
      }

      .canvas-controls {
        gap: 8px;
        padding: 0 5px;
      }

      .canvas-controls button {
        padding: 8px 12px;
        font-size: 13px;
      }

      .stroke-control {
        width: 100%;
        justify-content: center;
        padding: 6px 10px;
      }

      .stroke-control input {
        width: 80px;
      }
    }
    
    @media (max-width: 600px) {
      body {
        padding: 10px;
      }
      
      body::after {
        width: 60px;
        height: 60px;
        bottom: 15px;
        right: 15px;
      }
      
      .mobile-menu-toggle {
        display: block;
      }
      
      .sidebar {
        display: none;
        width: 100%;
        margin-right: 0;
        margin-bottom: 15px;
        max-height: 250px;
      }
      
      .sidebar.show {
        display: block;
      }
      
      .sidebar h3 {
        font-size: 16px;
      }
      
      .sidebar button {
        padding: 8px;
        font-size: 12px;
      }
      
      #current-word {
        font-size: 18px;
        margin-bottom: 10px;
        padding: 10px 20px;
        flex-direction: column;
        gap: 5px;
        min-width: auto;
        width: calc(100% - 20px);
      }

      .hanzi {
        font-size: 28px;
      }

      .info {
        font-size: 14px;
        align-items: center;
        text-align: center;
      }

      .info .spanish {
        font-size: 13px;
      }
      
      #character-target-div {
        width: 120px !important;
        height: 120px !important;
        margin: 15px 0 10px 0;
      }
      
      .replay-button {
        font-size: 13px;
        padding: 8px 15px;
      }
      
      .practice-section {
        padding: 12px;
        margin-top: 15px;
        width: calc(100% - 10px);
      }
      
      .practice-section h3 {
        font-size: 18px;
        margin-bottom: 10px;
      }

      .canvas-container {
        padding: 8px;
        margin: 10px 0;
      }
      
      #character-canvas {
        width: 180px !important;
        height: 180px !important;
      }
      
      .canvas-controls {
        flex-direction: column;
        gap: 6px;
        padding: 0;
        width: 100%;
      }
      
      .canvas-controls button {
        width: 100%;
        padding: 8px;
        font-size: 12px;
      }
      
      .stroke-control {
        width: 100%;
        justify-content: center;
        padding: 6px 10px;
      }

      .stroke-control input {
        width: 70px;
      }

      .stroke-control label {
        font-size: 13px;
      }
      
      .nav-buttons {
        flex-wrap: wrap;
        gap: 8px;
        width: 100%;
        padding: 0 5px;
      }
      
      .nav-buttons button {
        flex: 1;
        min-width: 120px;
        padding: 10px 12px;
        font-size: 14px;
      }
      
      .audio-button {
        position: static;
        margin-bottom: 10px;
      }
    }
    
    @media (max-width: 400px) {
      body {
        padding: 5px;
      }
      
      body::after {
        width: 50px;
        height: 50px;
        bottom: 10px;
        right: 10px;
      }
      
      #current-word {
        font-size: 16px;
        padding: 8px 15px;
        flex-direction: column;
        gap: 3px;
        width: 100%;
      }

      .hanzi {
        font-size: 24px;
      }

      .info {
        font-size: 12px;
      }

      .info .spanish {
        font-size: 11px;
      }
      
      #character-target-div {
        width: 100px !important;
        height: 100px !important;
      }
      
      .replay-button {
        font-size: 12px;
        padding: 6px 12px;
      }
      
      .practice-section {
        padding: 10px;
        width: 100%;
        margin-left: 0;
        margin-right: 0;
      }
      
      .practice-section h3 {
        font-size: 16px;
        margin-bottom: 8px;
      }

      .canvas-container {
        padding: 5px;
      }
      
      #character-canvas {
        width: 160px !important;
        height: 160px !important;
      }
      
      .canvas-controls {
        gap: 5px;
      }
      
      .canvas-controls button {
        font-size: 11px;
        padding: 7px;
      }

      .stroke-control {
        padding: 5px 8px;
      }

      .stroke-control input {
        width: 60px;
      }

      .stroke-control label {
        font-size: 12px;
      }
      
      .nav-buttons button {
        font-size: 13px;
        padding: 8px 10px;
        min-width: 100px;
      }
    }
    
    @media (max-width: 350px) {
      #character-canvas {
        width: 140px !important;
        height: 140px !important;
      }
      
      .canvas-controls button {
        font-size: 10px;
        padding: 6px;
      }

      .stroke-control {
        font-size: 11px;
      }

      .stroke-control input {
        width: 50px;
      }
    }
    
    @media (max-width: 900px) and (orientation: landscape) {
      body {
        padding: 10px;
      }
      
      body::after {
        width: 60px;
        height: 60px;
        bottom: 10px;
        right: 10px;
      }
      
      .container {
        flex-direction: row;
      }
      
      .sidebar {
        width: 180px;
        margin-right: 15px;
        max-height: 70vh;
      }
      
      .sidebar h3 {
        font-size: 14px;
      }
      
      .sidebar button {
        padding: 6px;
        font-size: 12px;
      }
      
      #character-target-div {
        width: 100px !important;
        height: 100px !important;
      }
      
      .replay-button {
        font-size: 12px;
        padding: 6px 12px;
      }
      
      .practice-section {
        padding: 10px;
        max-width: 350px;
      }

      .canvas-container {
        padding: 8px;
      }
      
      #character-canvas {
        width: 180px !important;
        height: 180px !important;
      }

      .canvas-controls {
        gap: 6px;
      }

      .canvas-controls button {
        padding: 7px 10px;
        font-size: 12px;
      }
      
      .mobile-menu-toggle {
        display: none;
      }
      
      .sidebar {
        display: block !important;
      }
      
      .audio-button {
        width: 30px;
        height: 30px;
        font-size: 12px;
      }

      #current-word {
        font-size: 18px;
        padding: 10px 20px;
      }

      .hanzi {
        font-size: 28px;
      }

      .info {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">☰ Menú de Caracteres</button>
    
    <div class="sidebar" id="sidebar">
      <h3>Selecciona un carácter</h3>
      <ul id="character-menu"></ul>
    </div>

    <div class="main-content">
      <div id="current-word"></div>
      
      <div class="character-display-section">
        <div id="character-target-div"></div>
        <button class="replay-button" onclick="replayAnimation()">
          ↻ Repetir animación
        </button>
      </div>

      <div class="practice-section">
        <h3>Practica escribir el caracter</h3>
        <div class="canvas-container">
          <canvas id="character-canvas" width="250" height="250"></canvas>
        </div>
        <div class="canvas-controls">
          <button class="clear-button" onclick="clearCanvas()">Limpiar</button>
          <button onclick="toggleGuide()">Mostrar/Ocultar Guía</button>
          <div class="stroke-control">
            <label for="stroke-width">Grosor:</label>
            <input type="range" id="stroke-width" min="1" max="10" value="3">
            <span id="stroke-value">3</span>
          </div>
        </div>
      </div>

      <div class="nav-buttons">
        <button id="prev-button">← Anterior</button>
        <button id="next-button">Siguiente →</button>
      </div>
    </div>
  </div>

  <script>
const characters = [
  { char: '年', pinyin: 'nián', spanish: 'año' },
  { char: '月', pinyin: 'yuè', spanish: 'mes' },
  { char: '号', pinyin: 'hào', spanish: 'número/día (fecha)' },
  { char: '日', pinyin: 'rì', spanish: 'día (formal)' },
  { char: '星', pinyin: 'xīng', spanish: 'estrella (semana)' },
  { char: '期', pinyin: 'qī', spanish: 'período (semana)' },
  { char: '今', pinyin: 'jīn', spanish: 'hoy (este)' },
  { char: '祝', pinyin: 'zhù', spanish: 'desear' },
  { char: '贺', pinyin: 'hè', spanish: 'felicitar' },
  { char: '过', pinyin: 'guò', spanish: 'pasar/celebrar' },
  { char: '生', pinyin: 'shēng', spanish: 'nacer' },
  { char: '日', pinyin: 'rì', spanish: 'día (cumpleaños)' },
  { char: '快', pinyin: 'kuài', spanish: 'rápido/feliz' },
  { char: '乐', pinyin: 'lè', spanish: 'feliz/alegría' },
  { char: '参', pinyin: 'cān', spanish: 'participar' },
  { char: '加', pinyin: 'jiā', spanish: 'añadir' },
  { char: '聚', pinyin: 'jù', spanish: 'reunir' },
  { char: '会', pinyin: 'huì', spanish: 'reunión' },
  { char: '出', pinyin: 'chū', spanish: 'salir' },
  { char: '生', pinyin: 'shēng', spanish: 'nacer (nacimiento)' },
  { char: '蛋', pinyin: 'dàn', spanish: 'huevo' },
  { char: '糕', pinyin: 'gāo', spanish: 'pastel' },
  { char: '红', pinyin: 'hóng', spanish: 'rojo' },
  { char: '鸡', pinyin: 'jī', spanish: 'pollo' },
  { char: '礼', pinyin: 'lǐ', spanish: 'regalo' },
  { char: '物', pinyin: 'wù', spanish: 'cosa (regalo)' },
  { char: '属', pinyin: 'shǔ', spanish: 'pertenecer' },
  { char: '鼠', pinyin: 'shǔ', spanish: 'ratón' },
  { char: '牛', pinyin: 'niú', spanish: 'buey/vaca' },
  { char: '虎', pinyin: 'hǔ', spanish: 'tigre' },
  { char: '兔', pinyin: 'tù', spanish: 'conejo' },
  { char: '龙', pinyin: 'lóng', spanish: 'dragón' },
  { char: '蛇', pinyin: 'shé', spanish: 'serpiente' },
  { char: '马', pinyin: 'mǎ', spanish: 'caballo' },
  { char: '羊', pinyin: 'yáng', spanish: 'oveja' },
  { char: '猴', pinyin: 'hóu', spanish: 'mono' },
  { char: '鸡', pinyin: 'jī', spanish: 'gallo' },
  { char: '狗', pinyin: 'gǒu', spanish: 'perro' },
  { char: '猪', pinyin: 'zhū', spanish: 'cerdo' },
  { char: '有', pinyin: 'yǒu', spanish: 'tener' },
  { char: '课', pinyin: 'kè', spanish: 'clase' },
  { char: '再', pinyin: 'zài', spanish: 'otra vez' },
  { char: '起', pinyin: 'qǐ', spanish: 'levantarse' },
  { char: '床', pinyin: 'chuáng', spanish: 'cama' },
  { char: '刷', pinyin: 'shuā', spanish: 'cepillar' },
  { char: '牙', pinyin: 'yá', spanish: 'diente' },
  { char: '穿', pinyin: 'chuān', spanish: 'vestirse' },
  { char: '衣', pinyin: 'yī', spanish: 'ropa' },
  { char: '服', pinyin: 'fú', spanish: 'ropa (formal)' },
  { char: '洗', pinyin: 'xǐ', spanish: 'lavar' },
  { char: '碗', pinyin: 'wǎn', spanish: 'plato' },
  { char: '遛', pinyin: 'liù', spanish: 'pasear' },
  { char: '狗', pinyin: 'gǒu', spanish: 'perro' },
  { char: '澡', pinyin: 'zǎo', spanish: 'baño' },
  { char: '睡', pinyin: 'shuì', spanish: 'dormir' },
  { char: '觉', pinyin: 'jiào', spanish: 'dormir/sueño' },
  { char: '每', pinyin: 'měi', spanish: 'cada' },
  { char: '天', pinyin: 'tiān', spanish: 'día' },
  { char: '历', pinyin: 'lì', spanish: 'historia' },
  { char: '史', pinyin: 'shǐ', spanish: 'historia' },
  { char: '从', pinyin: 'cóng', spanish: 'desde' },
  { char: '来', pinyin: 'lái', spanish: 'venir' },
  { char: '视', pinyin: 'shì', spanish: 'mirar' },
  { char: '频', pinyin: 'pín', spanish: 'frecuencia' },
  { char: '常', pinyin: 'cháng', spanish: 'frecuente' },
  { char: '旅', pinyin: 'lǚ', spanish: 'viajar' },
  { char: '行', pinyin: 'xíng', spanish: 'caminar' },
  { char: '时', pinyin: 'shí', spanish: 'tiempo' },
  { char: '忘', pinyin: 'wàng', spanish: 'olvidar' },
  { char: '带', pinyin: 'dài', spanish: 'llevar' },
  { char: '很', pinyin: 'hěn', spanish: 'muy' },
  { char: '少', pinyin: 'shǎo', spanish: 'poco' },
  { char: '作', pinyin: 'zuò', spanish: 'hacer' },
  { char: '业', pinyin: 'yè', spanish: 'tarea/trabajo' },
  { char: '喂', pinyin: 'wèi', spanish: 'alimentar' },
  { char: '猫', pinyin: 'māo', spanish: 'gato' },
  { char: '了', pinyin: 'le', spanish: 'partícula de acción completada' },
    { char: '运', pinyin: 'yùn', spanish: 'movimiento/transportar', unit: 3 },
    { char: '动', pinyin: 'dòng', spanish: 'moverse/movimiento', unit: 3 },
    { char: '空', pinyin: 'kòng', spanish: 'vacío/tiempo libre', unit: 3 },
    { char: '闲', pinyin: 'xián', spanish: 'ocioso/libre', unit: 3 },
    { char: '爱', pinyin: 'ài', spanish: 'amor/amar', unit: 3 },
    { char: '好', pinyin: 'hào', spanish: 'hobby/afición', unit: 3 },
    { char: '兴', pinyin: 'xìng', spanish: 'interés/ánimo', unit: 3 },
    { char: '趣', pinyin: 'qù', spanish: 'interés/diversión', unit: 3 },
    { char: '感', pinyin: 'gǎn', spanish: 'sentir/emoción', unit: 3 },
    { char: '踢', pinyin: 'tī', spanish: 'patear', unit: 3 },
    { char: '足', pinyin: 'zú', spanish: 'pie/fútbol', unit: 3 },
    { char: '球', pinyin: 'qiú', spanish: 'pelota/balón', unit: 3 },
    { char: '画', pinyin: 'huà', spanish: 'dibujar/pintura', unit: 3 },
    { char: '烘', pinyin: 'hōng', spanish: 'hornear', unit: 3 },
    { char: '焙', pinyin: 'bèi', spanish: 'tostar/hornear', unit: 3 },
    { char: '剧', pinyin: 'jù', spanish: 'drama/teatro', unit: 3 },
    { char: '化', pinyin: 'huà', spanish: 'transformar/maquillaje', unit: 3 },
    { char: '妆', pinyin: 'zhuāng', spanish: 'maquillaje', unit: 3 },
    { char: '网', pinyin: 'wǎng', spanish: 'red/internet', unit: 3 },
    { char: '弹', pinyin: 'tán', spanish: 'tocar (instrumento)', unit: 3 },
    { char: '吉', pinyin: 'jí', spanish: 'suerte/guitarra', unit: 3 },
    { char: '他', pinyin: 'tā', spanish: 'guitarra (他 en 吉他)', unit: 3 },
    { char: '夜', pinyin: 'yè', spanish: 'noche', unit: 3 },
    { char: '健', pinyin: 'jiàn', spanish: 'sano/fuerte', unit: 3 },
    { char: '身', pinyin: 'shēn', spanish: 'cuerpo', unit: 3 },
    { char: '护', pinyin: 'hù', spanish: 'proteger/cuidar', unit: 3 },
    { char: '肤', pinyin: 'fū', spanish: 'piel', unit: 3 },
    { char: '游', pinyin: 'yóu', spanish: 'nadar/viajar', unit: 3 },
    { char: '戏', pinyin: 'xì', spanish: 'juego/obra', unit: 3 },
    { char: '博', pinyin: 'bó', spanish: 'amplio/museo', unit: 3 },
    { char: '馆', pinyin: 'guǎn', spanish: 'edificio/museo', unit: 3 },
    { char: '参', pinyin: 'cān', spanish: 'participar/visitar', unit: 3 },
    { char: '观', pinyin: 'guān', spanish: 'observar/visitar', unit: 3 },
    { char: '玩', pinyin: 'wán', spanish: 'jugar/divertirse', unit: 3 },
    { char: '桌', pinyin: 'zhuō', spanish: 'mesa', unit: 3 },
    { char: '拍', pinyin: 'pāi', spanish: 'golpear/tomar foto', unit: 3 },
    { char: '照', pinyin: 'zhào', spanish: 'foto/iluminar', unit: 3 },
    { char: '片', pinyin: 'piàn', spanish: 'foto/película', unit: 3 }
    ];
    let currentIndex = 0;
    let writer = null;
    let isDrawing = false;
    let showGuide = true;
    let lastX = 0;
    let lastY = 0;

    // Canvas setup
    const canvas = document.getElementById('character-canvas');
    const ctx = canvas.getContext('2d');
    ctx.lineCap = 'round';
    ctx.lineJoin = 'round';

    // Stroke width control
    const strokeWidthInput = document.getElementById('stroke-width');
    const strokeValueDisplay = document.getElementById('stroke-value');
    strokeWidthInput.addEventListener('input', (e) => {
      ctx.lineWidth = e.target.value;
      strokeValueDisplay.textContent = e.target.value;
    });
    ctx.lineWidth = strokeWidthInput.value;

    // Drawing functions
    function startDrawing(e) {
      isDrawing = true;
      const rect = canvas.getBoundingClientRect();
      const x = (e.clientX || e.touches[0].clientX) - rect.left;
      const y = (e.clientY || e.touches[0].clientY) - rect.top;
      lastX = x * (canvas.width / rect.width);
      lastY = y * (canvas.height / rect.height);
    }

    function draw(e) {
      if (!isDrawing) return;
      e.preventDefault();
      
      const rect = canvas.getBoundingClientRect();
      const x = (e.clientX || e.touches[0].clientX) - rect.left;
      const y = (e.clientY || e.touches[0].clientY) - rect.top;
      const currentX = x * (canvas.width / rect.width);
      const currentY = y * (canvas.height / rect.height);

      ctx.strokeStyle = '#000';
      ctx.beginPath();
      ctx.moveTo(lastX, lastY);
      ctx.lineTo(currentX, currentY);
      ctx.stroke();

      lastX = currentX;
      lastY = currentY;
    }

    function stopDrawing() {
      isDrawing = false;
    }

    // Mouse events
    canvas.addEventListener('mousedown', startDrawing);
    canvas.addEventListener('mousemove', draw);
    canvas.addEventListener('mouseup', stopDrawing);
    canvas.addEventListener('mouseout', stopDrawing);

    // Touch events for mobile
    canvas.addEventListener('touchstart', (e) => {
      e.preventDefault();
      startDrawing(e);
    });
    canvas.addEventListener('touchmove', (e) => {
      e.preventDefault();
      draw(e);
    });
    canvas.addEventListener('touchend', (e) => {
      e.preventDefault();
      stopDrawing();
    });

    function clearCanvas() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      if (showGuide) {
        drawGuideCharacter();
      }
    }

    function drawGuideCharacter() {
      const item = characters[currentIndex];
      ctx.save();
      ctx.font = '180px Arial';
      ctx.fillStyle = 'rgba(200, 200, 200, 0.3)';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(item.char, canvas.width / 2, canvas.height / 2);
      ctx.restore();
    }

    function toggleGuide() {
      showGuide = !showGuide;
      const currentLineWidth = ctx.lineWidth;
      clearCanvas();
      ctx.lineWidth = currentLineWidth;
    }

    function toggleMobileMenu() {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('show');
    }

    // Function to replay the character animation
    function replayAnimation() {
      if (writer) {
        writer.animateCharacter();
      }
    }

    function showCharacter(index) {
      if (index >= characters.length) {
        index = 0;
      } else if (index < 0) {
        index = characters.length - 1;
      }
      currentIndex = index;
      const item = characters[index];

      // Update current word display
      document.getElementById('current-word').textContent = `${item.char} (${item.pinyin}) - ${item.spanish}`;

      // Update HanziWriter display
      const targetDiv = document.getElementById('character-target-div');
      targetDiv.innerHTML = '';

      const divWidth = targetDiv.offsetWidth || 150;
      const divHeight = targetDiv.offsetHeight || 150;
      
      writer = HanziWriter.create('character-target-div', item.char, {
        width: divWidth,
        height: divHeight,
        padding: 10,
        strokeColor: '#000',
        strokeAnimationSpeed: 1,
        delayBetweenStrokes: 300,
      });
      writer.animateCharacter();

      // Clear and update canvas
      clearCanvas();

      // Update active button in sidebar
      const buttons = document.querySelectorAll('.sidebar button');
      buttons.forEach((btn, i) => {
        if (i === index) {
          btn.classList.add('active');
        } else {
          btn.classList.remove('active');
        }
      });

      // Close mobile menu after selection on small screens
      if (window.innerWidth <= 600) {
        const sidebar = document.getElementById('sidebar');
        sidebar.classList.remove('show');
      }
    }

    function generateMenu() {
      const menu = document.getElementById('character-menu');
      characters.forEach((item, index) => {
        const li = document.createElement('li');
        const button = document.createElement('button');
        button.textContent = `${item.char} (${item.pinyin})`;
        button.addEventListener('click', () => showCharacter(index));
        li.appendChild(button);
        menu.appendChild(li);
      });
    }

    // Initialize
    generateMenu();
    showCharacter(currentIndex);

    // Navigation buttons
    document.getElementById('prev-button').addEventListener('click', () => {
      showCharacter(currentIndex - 1);
    });

    document.getElementById('next-button').addEventListener('click', () => {
      showCharacter(currentIndex + 1);
    });

    // Handle window resize
    let resizeTimeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(() => {
        showCharacter(currentIndex);
      }, 250);
    });
  </script>
</body>
</html>